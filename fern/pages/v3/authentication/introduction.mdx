---
title: Authenticated Tool Calling
image: ""   # image for socials
description: "Composio lets you create agents that can act across multiple services on behalf of you or your users."
keywords: ""
subtitle: ""
hide-nav-links: true
---

Different apps (like Slack, Notion, Shopify) have their own authentication flows that need to be implemented in order to use their APIs as tools properly.

Composio manages the authentication flows for each different type of type of auth like OAuth 2.0, API keys & more to let AI agents act on behalf of you or your users.

## Creating an auth config
Each toolkit comes with it's own set of configurations called *auth config*.
This configuration is used to authenticate the tools and agents that use the toolkit.

The first step is to create an auth config for any toolkit that you want to use.

{/* - [ ] imo, CLI is can offer a nice experience for creating auth configs. dashboard is too icky. */}

<Tabs>
<Tab title="CLI">
<CodeGroup>
```bash wordWrap
composio auth-configs create --toolkit-slug HACKERNEWS --name "HackerNews" --type "oauth"
```
</CodeGroup>
</Tab>
<Tab title="Dashboard">
The dashboard offers a guided process for all app types.

<Steps>
<Step title="Select App">
Navigate to the [Apps page](https://app.composio.dev/apps) and choose the app you want to integrate (e.g., Slack).
<Frame background="subtle" title="Application Selection Screen">
  <img src="../../../assets/images/integration-step-1-0.png" />
</Frame>
</Step>
<Step title="Initiate Setup">
Click the **"Setup Integration"** button.
<Frame background="subtle" title="Auth Config Setup Interface">
  <img src="../../../assets/images/integration-step-2-0.png" />
</Frame>
</Step>
<Step title="Configure Auth Config Settings (If Required)">
The next steps depend on the app's authentication method:

- **For OAuth 2.0 Apps:** You'll need to decide whether to use Composio's default OAuth app or your own developer credentials. For more details, see **[Handling OAuth Connections](/auth/connection/oauth)** and **[White-labelling](/auth/white-labelling)**.
- **For API Key/Token Apps:** The keys are typically provided by the end-user later in the connection flow. See **[Handling API Key Connections](/auth/connection/non-oauth)** for that process.

You might also configure default scopes or API base URLs here if applicable.
</Step>
<Step title="Create and Get ID">
Click **"Create Auth Config"**. After creation, **copy the displayed `auth_config_id`**. You'll need this ID in your application code.

</Step>
</Steps>
</Tab>
</Tabs>


Ensure you save the `auth_config_id` in a secrets manager or environment variable for later use.

<Note title="Auth configs are reusable">
A user's credentials alongwith the appropriate developer credentials and other configurations are scoped to an auth config.

Once created, it's reusable across multiple users.
</Note>


## Authenticating and executing tools
Here's how you can use the auth config to execute tools for a given user.

<Tabs>
<Tab title="OAuth">
Let's say `ac_1234` is the auth config ID for the GitHub toolkit.

Here's how to authenticate the GitHub toolkit for a given user.
<CodeGroup>
```typescript Typescript maxLines=60  wordWrap
import { Composio } from "@composio/core";

const composio = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
});

const userId = "your@email.com";
const authConfigId = "ac_1234"; // For example, auth config id of GitHub

const connectionRequest = await composio.connectedAccounts.initiate(
  userId,
  authConfigId
);

console.log(connectionRequest.redirectUrl);

await connectionRequest.waitForConnection();
```
</CodeGroup>

Once the connection is established, you can execute authenticated tool calls for that user.

<CodeGroup>
```typescript Typescript maxLines=60  wordWrap

const result = await composio.tools.execute("GITHUB_STAR_A_REPOSITORY_FOR_THE_AUTHENTICATED_USER", {
  userId,
  arguments: {
    owner: "composiohq",
    repo: "composio",
  },
});

console.log(result);
```
</CodeGroup>

By default, Composio manages and provides the OAuth credentials for most of the OAuth apps. This lets you get started without waiting for app approvals or credential setup.

However, when you're ready to scale to many users or need more control (such as for production workloads or white-labelling), we recommend [using your own OAuth credentials](/authentication/oauth-keys).

</Tab>

<Tab title="API Key">
Let's say `ac_1234` is the auth config ID for the Serp API toolkit.

Here's how to authenticate the Serp API toolkit for a given user.
<CodeGroup>
```typescript Typescript maxLines=60  wordWrap
import { Composio } from "@composio/core";

const composio = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
});

const userId = "your@email.com";
const authConfigId = "ac_1234"; // For example, auth config id of Serp API

const connectionRequest = await composio.connectedAccounts.initiate(
  userId,
  authConfigId,
  {
    data: {
      api_key: "sk_1234567890",     // Serp API key
    },
  }
);
```
</CodeGroup>

In these cases, it is possible to either request the user to provide the API key or provide your own!

Once the connection is established, you can execute authenticated tool calls for that user.

<CodeGroup>
```typescript Typescript maxLines=60  wordWrap

const result = await composio.tools.execute("SERPAPI_SEARCH", {
  userId,
  arguments: {
    query: "When was the great fire of San Francisco?",
  },
});

console.log(result);

```
</CodeGroup>


</Tab>

<Tab title="Other">
<CodeGroup>
```typescript Typescript maxLines=60  wordWrap

```
</CodeGroup>
</Tab>

</Tabs>
