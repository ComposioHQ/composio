---
title: Processing Tools
image: ""   # image for socials
keywords: ""
subtitle: "Learn how to use modifiers to transform tool schemas, modify inputs before execution, and transform outputs after execution."
hide-nav-links: false
---
Composio SDK provides powerful middleware capabilities through modifiers that allow you to customize and extend the behavior of tools.

Modifiers are functions that intercept and modify the normal flow of tool operations. Composio supports three types of modifiers:

1. **[Schema Modifiers](#schema-modifiers)** 
2. **[Before Execution Modifiers](#before-execution-modifiers)**
3. **[After Execution Modifiers](#after-execution-modifiers)**

## Schema Modifiers
Schema modifiers transform a tool's schema before the tool is seen by an agent.

<Frame>
    <img src="../../../assets/images/schema-modifier.png" alt="Schema Modifier" />
</Frame>
**Useful for:**
- Adding default values to tool arguments.
- Modifying the schema to change the arguments of the tool.
- Hiding arguments from the tool.

<Note>
Below we modify the schema of the `HACKERNEWS_GET_LATEST_POSTS` to make the `size` argument required and remove the `page` argument.
</Note>

<CodeGroup>
```typescript Typescript maxLines=60 wordWrap
const userId = "your@email.com";

const tools = await composio.tools.get(
  userId,
  {
    tools: ["HACKERNEWS_GET_LATEST_POSTS", "HACKERNEWS_GET_USER"],
  },
  {
    modifyToolSchema: (toolSlug, _, toolSchema) => {
      if (toolSlug === "HACKERNEWS_GET_LATEST_POSTS") {
        if (toolSchema.inputParameters?.properties) {
          const properties = toolSchema.inputParameters.properties as Record<
            string,
            unknown
          >;
          delete properties["page"];
        }
        toolSchema.inputParameters.required = ["size"];
      }
      return toolSchema;
    },
  }
);

console.log(JSON.stringify(tools, null, 2));
```
</CodeGroup>

In using the above modified tool schema, the `page` argument is removed and the `size` argument is required.

You can test this out by viewing the tool call response in the LLM too! 

<Accordion title="Schema modified tool call">
<CodeGroup>

```typescript Typescript maxLines=60 wordWrap
import { Composio } from "@composio/core";
import { OpenAI } from "openai";

const composio = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
});
const openai = new OpenAI();

const userId = "your@email.com";

const tools = await composio.tools.get(
  userId,
  {
    tools: ["HACKERNEWS_GET_LATEST_POSTS", "HACKERNEWS_GET_USER"],
  },
  {
    modifyToolSchema: (toolSlug, _, toolSchema) => {
      if (toolSlug === "HACKERNEWS_GET_LATEST_POSTS") {
        if (toolSchema.inputParameters?.properties) {
          const properties = toolSchema.inputParameters.properties as Record<
            string,
            unknown
          >;
          delete properties["page"];
        }
        toolSchema.inputParameters.required = ["size"];
      }
      return toolSchema;
    },
  }
);

console.log(JSON.stringify(tools, null, 2));

const messages: OpenAI.ChatCompletionMessageParam[] = [
  {
    role: "system",
    content: "You are a helpful assistant that can help with tasks.",
  },
  { role: "user", content: "Get the latest posts from Hacker News" },
];

const response = await openai.chat.completions.create({
  model: "gpt-4o-mini",
  messages,
  tools: tools,
  tool_choice: "auto",
});

console.log(response.choices[0].message.tool_calls);
```
</CodeGroup>
</Accordion>

## Before Execution Modifiers
These modifiers are called before the tool is executed by the LLM. This allows you to modify the *arguments* called by the LLM before they are executd by Composio.

**Useful for:**
- Injecting an argument into the tool execution.
- Overriding the arguments emitted by the LLM.

<Note>Below we use the `beforeToolExecute` modifier to modify the number of posts returned by the `HACKERNEWS_GET_LATEST_POSTS` tool.</Note>

<Tabs>
<Tab title="Without a Provider">
<CodeGroup>
```typescript Typescript maxLines=60  wordWrap
const response = await openai.chat.completions.create({
  model: "gpt-4o-mini",
  messages,
  tools: tools,
  tool_choice: "auto",
});

console.log(response.choices[0].message.tool_calls);

if (response.choices[0].message.tool_calls) {
  const result = await composio.tools.execute(
    "HACKERNEWS_GET_LATEST_POSTS",
    {
      userId: userId,
      arguments: JSON.parse(
        response.choices[0].message.tool_calls[0].function.arguments
      ),
    },
    {
      beforeToolExecute: (toolSlug, _, params) => {
        if (toolSlug === "HACKERNEWS_GET_LATEST_POSTS") {
          params.arguments.size = 1;
        }
        console.log(params);
        return params;
      },
    }
  );
  console.log(JSON.stringify(result, null, 2));
}
```
</CodeGroup>
</Tab>

<Tab title="With a Provider">
<CodeGroup>
```typescript Typescript maxLines=60  wordWrap
const vercel = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
  provider: new VercelProvider(),
});

const agenticTools = await vercel.tools.get(
  'default',
  // what is the type error i am getting here?
  { tools: ['HACKERNEWS_GET_USER'] },
  {
    beforeToolExecute: (toolSlug, _, params) => {
      if (toolSlug === "HACKERNEWS_GET_LATEST_POSTS") {
        params.arguments.size = 1;
      }
      return params;
    },
  }
);
```
</CodeGroup>
</Tab>
</Tabs>


## After Execution Modifiers
These modifiers are called after the tool is executed by the LLM. This allows you to modify the *result* of the tool before it is returned to the agent.

**Useful for:**
- Modifying or truncating the output of the tool.
- Convert the output to a different format before returning it to the agent.

<Note>Below we use the `afterToolExecute` modifier to truncate the output of the `HACKERNEWS_GET_USER` tool and only return the karma of the user.</Note>

<Tabs>
<Tab title="Without a Provider">
<CodeGroup>
```typescript Typescript maxLines=60  wordWrap
const response = await openai.chat.completions.create({
  model: "gpt-4o-mini",
  messages,
  tools: tools,
  tool_choice: "auto",
});

console.log(response.choices[0].message.tool_calls);

if (response.choices[0].message.tool_calls) {
  const result = await composio.tools.execute(
    "HACKERNEWS_GET_USER",
    {
      userId: userId,
      arguments: JSON.parse(
        response.choices[0].message.tool_calls[0].function.arguments
      ),
    },
    {
      afterToolExecute: (toolSlug, _, result) => {
        if (toolSlug === "HACKERNEWS_GET_USER") {
          const responseData = result.data.response_data as { karma: number };
          return {
            ...result,
            data: {
              karma: responseData.karma
            },
          };
        }
        return result;
      },
    }
  );
  console.log(JSON.stringify(result, null, 2));
}
```
</CodeGroup>
</Tab>

<Tab title="With a Provider">
<CodeGroup>
```typescript Typescript maxLines=60  wordWrap
const vercel = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
  provider: new VercelProvider(),
});

const agenticTools = await vercel.tools.get(
  'default',
  { tools: ['HACKERNEWS_GET_USER'] },
  {
    afterExecute: (toolSlug, toolkitSlug, result) => {
      if (toolSlug === "HACKERNEWS_GET_USER") {
        const responseData = result.data.response_data as { karma: number };
        return {
          ...result,
          data: {
            karma: responseData.karma
          },
        };
      }
      return result;
    },
  }
);
```
</CodeGroup>
</Tab>
</Tabs>