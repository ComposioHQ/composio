---
title: MCP implementation
subtitle: Complete guide to MCP server development
---

This guide covers everything you need to implement MCP servers in production.

## Authentication

MCP servers handle authentication for you. Configure OAuth, API keys, or custom auth through auth configs.

### Check connection status

<CodeGroup>
<CodeGroupItem title="Python">
```python
# Python SDK - connection checking coming soon
# For now, use the generate method which handles auth
instance = server.generate("user@example.com")
```
</CodeGroupItem>
<CodeGroupItem title="TypeScript">
```typescript
const status = await composio.mcp.getUserConnectionStatus(
  "user@example.com",
  server.id
);

if (!status.connected) {
  // Handle missing authentication
  const auth = await composio.mcp.authorize(
    "user@example.com",
    server.id,
    "gmail"
  );
  console.log(`Authenticate at: ${auth.redirectUrl}`);
}
```
</CodeGroupItem>
</CodeGroup>

## Server management

### List servers

<CodeGroup>
<CodeGroupItem title="Python">
```python
# List all servers
servers = composio.mcp.list()

# Filter by toolkit
gmail_servers = composio.mcp.list(toolkits="gmail")
```
</CodeGroupItem>
<CodeGroupItem title="TypeScript">
```typescript
// List all servers
const servers = await composio.mcp.list();

// Filter by toolkit
const gmailServers = await composio.mcp.list({
  toolkits: ["gmail"]
});
```
</CodeGroupItem>
</CodeGroup>

### Update servers

<CodeGroup>
<CodeGroupItem title="Python">
```python
updated = composio.mcp.update(
    server_id="mcp_server_id",
    name="updated-name",
    allowed_tools=["GMAIL_FETCH_EMAILS"]
)
```
</CodeGroupItem>
<CodeGroupItem title="TypeScript">
```typescript
const updated = await composio.mcp.update(
  "mcp_server_id",
  "updated-name",
  [{ toolkit: "gmail", authConfigId: "ac_new" }]
);
```
</CodeGroupItem>
</CodeGroup>

## Multi-toolkit servers

Combine multiple services in a single MCP server:

<CodeGroup>
<CodeGroupItem title="Python">
```python
server = composio.mcp.create(
    name="productivity-suite",
    toolkits=[
        {"toolkit": "gmail", "auth_config": "ac_gmail"},
        {"toolkit": "slack", "auth_config": "ac_slack"},
        {"toolkit": "github", "auth_config": "ac_github"}
    ],
    allowed_tools=[
        "GMAIL_FETCH_EMAILS",
        "SLACK_SEND_MESSAGE",
        "GITHUB_CREATE_ISSUE"
    ]
)
```
</CodeGroupItem>
<CodeGroupItem title="TypeScript">
```typescript
const server = await composio.mcp.create(
  "productivity-suite",
  [
    { authConfigId: "ac_gmail", allowedTools: ["GMAIL_FETCH_EMAILS"] },
    { authConfigId: "ac_slack", allowedTools: ["SLACK_SEND_MESSAGE"] },
    { authConfigId: "ac_github", allowedTools: ["GITHUB_CREATE_ISSUE"] }
  ],
  { isChatAuth: true }
);
```
</CodeGroupItem>
</CodeGroup>

## Error handling

<CodeGroup>
<CodeGroupItem title="Python">
```python
from composio.exceptions import ValidationError

try:
    server = composio.mcp.create(
        name="test-server",
        toolkits=[{"toolkit": "gmail"}]
    )
except ValidationError as e:
    print(f"Error: {e}")
```
</CodeGroupItem>
<CodeGroupItem title="TypeScript">
```typescript
try {
  const server = await composio.mcp.create(
    "test-server",
    [{ authConfigId: "invalid" }]
  );
} catch (error) {
  if (error instanceof ValidationError) {
    console.error("Validation failed:", error.message);
  }
}
```
</CodeGroupItem>
</CodeGroup>

## API reference

### Python methods

| Method | Description |
|--------|-------------|
| `create()` | Create new MCP server |
| `generate()` | Generate user instance |
| `list()` | List servers |
| `get()` | Get server details |
| `update()` | Update server |
| `delete()` | Delete server |

### TypeScript methods

| Method | Description |
|--------|-------------|
| `create()` | Create new MCP server |
| `getServer()` | Generate user URLs |
| `getUserConnectionStatus()` | Check auth status |
| `list()` | List servers |
| `get()` | Get server details |
| `getByName()` | Find server by name |
| `update()` | Update server |
| `delete()` | Delete server |
| `authorize()` | Start auth flow |

## Next steps

- [Quickstart guide](/docs/mcp-quickstart) - Get started quickly
- [Provider integrations](/docs/mcp-providers) - Framework-specific implementations
- [Troubleshooting](/docs/troubleshooting/mcp) - Common issues and solutions