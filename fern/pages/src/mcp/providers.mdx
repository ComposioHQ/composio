---

title: MCP Providers
subtitle: "Guide to Using Composio MCP Servers with Your Agent Framework"
image: "https://og.composio.dev/api/og?title=MCP%20Providers"   # image for socials
keywords: ""
hide-nav-links: true

---

<Warning title="Only available for Typescript SDK" icon="warning">At this time, MCP providers using the Composio SDK are only supported in the TypeScript SDK. Support for the Python SDK is coming soon.</Warning>

Integrating external tools into agent frameworks can be a complex and time-consuming process. Composio MCP (Model Context Protocol) servers simplify this workflow, enabling you to connect your framework to a wide array of tools and services with minimal configuration.

This guide introduces the primary MCP providers, each optimized for a popular agent framework. With these providers, you can focus on developing intelligent agent logic while Composio handles the integration details.

---

## 1. Anthropic Provider

The **Anthropic Provider** is purpose-built for use with the Anthropic Claude API. It supports Model Context Protocol (MCP) tools via a lightweight client that exposes a `getServer` method for retrieving the appropriate Composio MCP Server URL, preconfigured for your user. This provider ensures seamless compatibility between Composio tools and Anthropic‚Äôs function calling APIs.

<CodeGroup>
  <CodeGroupItem title="TypeScript">

```typescript
import { Composio } from '@composio/core';
import { AnthropicProvider } from '@composio/anthropic';
import Anthropic from '@anthropic-ai/sdk';

// Initialize Anthropic client
const anthropic = new Anthropic({
  apiKey: process.env.ANTHROPIC_API_KEY,
});

// Initialize Composio with the Anthropic provider
const composio = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
  provider: new AnthropicProvider({ cacheTools: true }),
});

const mcpConfig = await composio.mcp.create(
"Gmail Readonly Server",
[
  {
    toolkit: "gmail",
    allowedTools: ["GMAIL_FETCH_EMAILS"],
    authConfigId: "<auth_config_id>"
  },
],
{ useComposioManagedAuth: true }
);

console.log(`‚úÖ MCP server created: ${mcpConfig.id}`);
console.log(`üîß Available toolkits: ${mcpConfig.toolkits.join(", ")}`);

// Retrieve server instances for connected accounts
const serverInstances = await mcpConfig.getServer({
  userId: "utkarsh-dixit",
});

console.log("Server instances for connected accounts:", serverInstances);

console.log("\n=== Fetching and Summarizing Recent Emails ===");

const stream = await anthropic.beta.messages.stream(
{
  model: "claude-3-5-sonnet-20241022",
  max_tokens: 1000,
  mcp_servers: serverInstances,
  messages: [
    {
      role: "user",
      content:
        "Please fetch the latest 10 emails and provide a detailed summary with sender, subject, date, and brief content overview for each email. Format the response in a clear, organized way.",
    },
  ],
},
{
  headers: {
    "anthropic-beta": "mcp-client-2025-04-04",
  },
}
);

console.log("\nüì¨ Email Summary:");
for await (const event of stream) {
  if (
      event.type === "content_block_delta" &&
      event.delta.type === "text_delta"
  ) {
      process.stdout.write(event.delta.text);
  }
}
process.stdout.write("\n");

console.log("\n‚úÖ Anthropic MCP example completed successfully!");
```

  </CodeGroupItem>
</CodeGroup>

---

## 2. Mastra Provider

The **Mastra Provider** is tailored for the [Mastra](https://mastra.ai/en/docs/tools-mcp/overview#creating-tools) TypeScript-native agent framework. This client provides a getServer method to obtain the Composio MCP Server URL, configured for your user.

<CodeGroup>
  <CodeGroupItem title="Mastra">

```typescript
import { MastraProvider } from '@composio/mastra';
import { Composio } from '@composio/core';
import { MCPClient } from '@mastra/mcp';
import { Agent } from '@mastra/core/agent';
import { openai } from '@ai-sdk/openai';
import type { MastraMCPServerDefinition } from '@mastra/mcp';

const composio = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
  provider: new MastraProvider(),
});

// Create an MCP server with the Gmail toolkit
const mcpConfig = await composio.mcp.create(
"Gmail Readonly Server",
[
  {
    toolkit: "GMAIL",
    allowedTools: ["GMAIL_FETCH_EMAILS"],
    authConfigId: "<auth_config_id>"
  },
],
{ useComposioManagedAuth: true }
);

console.log(`‚úÖ MCP server created: ${mcpConfig.id}`);
console.log(`üîß Available toolkits: ${mcpConfig.toolkits.join(", ")}`);

// Retrieve server instance for connected accounts
const serverInstance = await mcpConfig.getServer({
  userId: "utkarsh-dixit"
});

console.log("Server instance for connected accounts:", serverInstance);

// Initialize MCPClient with the server URLs
const mcpClient = new MCPClient({
servers: Object.fromEntries(
  Object.entries(serverInstance as Record<string, { url: string }>).map(
    ([key, value]) => [key, { url: new URL(value.url) }]
  )
) satisfies Record<string, MastraMCPServerDefinition>,
});

// List available tools from MCP client
const tools = await mcpClient.getTools();
console.log(`üîß Available tools: ${Object.keys(tools).join(", ")}`);

// Create a Gmail agent using the MCP tools
const gmailAgent = new Agent({
  name: "Gmail Assistant",
  instructions: `
      You are a helpful Gmail assistant that fetches and summarizes emails.
      When fetching emails, provide a clear summary of the results including sender, subject, and date.
      Be concise and provide actionable information based on the email content.
  `,
  model: openai("gpt-4o-mini"),
  tools,
});

// Fetch and summarize recent emails
console.log("\n=== Fetching and Summarizing Recent Emails ===");
const emailResponse = await gmailAgent.generate(
"Fetch the latest 10 emails and provide a detailed summary with sender, subject, date, and brief content overview for each email"
);
console.log("\nüì¨ Email Summary:");
console.log(emailResponse.text);

console.log("\n‚úÖ Gmail MCP example completed successfully!");
```

  </CodeGroupItem>
</CodeGroup>

---

## 3. Vercel AI SDK Provider

The **Vercel AI SDK Provider** supports both traditional tool calling and Model Context Protocol (MCP) integration through `experimental_createMCPClient`. This provider transforms Composio MCP server URLs into the SSE format expected by Vercel AI SDK, enabling seamless integration with `generateText`, `streamText`, and other Vercel AI SDK functions.

<CodeGroup>
  <CodeGroupItem title="TypeScript">

```typescript
import { Composio } from '@composio/core';
import { VercelProvider } from '@composio/vercel';
import { experimental_createMCPClient, generateText } from 'ai';
import { openai } from '@ai-sdk/openai';

// Initialize Composio with the Vercel provider (includes MCP support)
const composio = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
  provider: new VercelProvider(),
});

// Create an MCP server with the Gmail toolkit
const mcpConfig = await composio.mcp.create(
"Gmail MCP Server",
[
  {
    toolkit: "gmail",
    allowedTools: ["GMAIL_FETCH_EMAILS", "GMAIL_SEND_EMAIL"],
    authConfigId: "<auth_config_id>"
  },
],
{ useComposioManagedAuth: true }
);

console.log(`‚úÖ MCP server created: ${mcpConfig.id}`);
console.log(`üîß Available toolkits: ${mcpConfig.toolkits.join(", ")}`);

// Get MCP server URLs for connected accounts
const serverUrls = await mcpConfig.getServer({
  userId: "utkarsh-dixit"
});

console.log("Server URLs for connected accounts:", serverUrls);

// Create MCP clients for each server URL
const clients = [];
const toolSets = [];

try {
  for (const serverConfig of serverUrls) {
    const client = await experimental_createMCPClient({
      transport: {
        type: serverConfig.type,
        url: serverConfig.url,
      },
    });
    
    clients.push(client);
    
    // Get tools from this client
    const tools = await client.tools();
    toolSets.push(tools);
  }

  // Combine tools from all clients
  const allTools = toolSets.reduce((acc, tools) => ({ ...acc, ...tools }), {});

  console.log("\n=== Fetching and Summarizing Recent Emails ===");

  // Use with Vercel AI SDK to fetch and summarize emails
  const response = await generateText({
    model: openai('gpt-4o'),
    tools: allTools,
    maxSteps: 3,
    messages: [
      {
        role: 'user',
        content: 'Fetch my latest 5 emails and provide a brief summary of each, including sender, subject, and main topic.',
      },
    ],
  });

  console.log("\nüìß Email Summary:");
  console.log(response.text);

  console.log("\n‚úÖ Vercel MCP example completed successfully!");

} finally {
  // Important: Close all MCP clients to clean up resources
  await Promise.all(clients.map(client => client.close()));
}
```

  </CodeGroupItem>
</CodeGroup>

---

## 4. OpenAI SDK Provider

The **OpenAI SDK Provider** is designed for use with the OpenAI SDK and supports MCP tools through a streamlined client. This client provides a `getServer` method to obtain the Composio MCP Server URL, configured for your user.

<CodeGroup>
  <CodeGroupItem title="TypeScript">

```typescript
const composio = new Composio({
  apiKey: process.env.COMPOSIO_API_KEY,
  provider: new OpenAIResponsesProvider(),
});

const mcpConfig = await composio.mcp.create(
"Gmail Readonly Server",
[
  {
    toolkit: "GMAIL",
    allowedTools: ["GMAIL_FETCH_EMAILS"],
    authConfigId: "<auth_config_id>"
  },
],
{ useComposioManagedAuth: true }
);

console.log(`‚úÖ MCP server created: ${mcpConfig.id}`);
console.log(`üîß Available toolkits: ${mcpConfig.toolkits.join(", ")}`);

// Retrieve server URLs for connected accounts
const serverUrls = await mcpConfig.getServer({
  userId: "utkarsh-dixit",
});

console.log("Server URLs for your MCP server:", serverUrls);

const completion = await openai.responses.create({
model: "gpt-4o-mini",
input:
  "I've connected to Gmail and I want to fetch the latest email from my inbox and summarize it",
tools: serverUrls,
});

console.log("\nüì¨ Email Summary:");
console.log(completion.output_text);

console.log("\n‚úÖ OpenAI MCP example completed successfully!");
console.log("\nüí° Note: The MCP server URLs can also be used to connect from other MCP-compatible clients.");
console.log(`üìç Server ID for future reference: ${mcpConfig.id}`);
```

  </CodeGroupItem>
</CodeGroup>

---

By using Composio MCP Servers with these specialized providers, you can quickly connect your agent framework to a wide range of external tools with minimal effort. Whether you're using Anthropic Claude, Mastra, Vercel AI SDK, or OpenAI, each provider is optimized for your specific framework, letting you streamline integration, reduce setup time, and focus more on building your AI agent.