---
title: Using In-chat authentication
image: "https://og.composio.dev/api/og?title=Using%20In-chat%20Authentication"
description: "Let your agent prompt users to connect accounts during conversation"
keywords: "tool router, authentication, in-chat, MANAGE_CONNECTIONS"
---

In-chat authentication lets your agent prompt users to connect accounts during chat. When a tool requires authentication, the agent returns a Connect Link URL. The user authenticates, confirms in chat, and the agent retries.

## How it works

1. Agent searches for tools via the `COMPOSIO_SEARCH_TOOLS` meta-tool
2. The `COMPOSIO_MANAGE_CONNECTIONS` meta-tool checks connection status, returns Connect Link URL if needed
3. User authenticates, confirms in chat, agent continues

## Configuration

By just creating a session with default configs, you are enabling in-chat auth. The `manage_connections` parameter defaults to `True`, which includes the `COMPOSIO_MANAGE_CONNECTIONS` meta-tool automatically:

<CodeGroup>
```python
session = await composio.create(
    user="user_123",
    manage_connections=True,  # default
)
```
```typescript
const session = await composio.create("user_123", {
  manageConnections: true,  // default
});
```
</CodeGroup>

### Custom callback URL

Redirect users to a specific page after authentication:

<CodeGroup>
```python
session = await composio.create(
    user="user_123",
    manage_connections={
        "callback_url": "https://yourapp.com/chat"
    },
)
```
```typescript
const { mcp } = await composio.create("user_123", {
  manageConnections: {
    callbackUrl: "https://yourapp.com/chat",
  },
});
```
</CodeGroup>

## Examples

<CodeGroup>
<SnippetCode src="fern/snippets/tool-router/python/quickstart-openai.py" title="Python" />
<SnippetCode src="fern/snippets/tool-router/typescript/quickstart-openai.ts" title="TypeScript" />
</CodeGroup>

What this looks like when you run the code:

```
Assistant: What would you like me to do today?

> Star the composio repo on GitHub