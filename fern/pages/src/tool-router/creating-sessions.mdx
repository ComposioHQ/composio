---
title: Creating sessions
image: "https://og.composio.dev/api/og?title=Creating%20Sessions"
description: "Configure toolkits, authentication, and connections for a session"
keywords: "sessions, create session, tool router, configuration"
hide-nav-links: false
---

Create a session to configure what tools are available and how authentication works for a user.

## Basic session

Create a session with all available toolkits:

<CodeGroup>
```python Python
from composio import Composio

composio = Composio(api_key="your-api-key")
session = composio.create(user_id="pg-user-550e8400-e29b-41d4")
```

```typescript TypeScript
import { Composio } from "@composio/core";

const composio = new Composio({ apiKey: "your-api-key" });
const session = await composio.create("pg-user-550e8400-e29b-41d4");
```
</CodeGroup>

## Configuration options

### toolkits

Restrict which toolkits are available in the session.

**Enable specific toolkits:**

<CodeGroup>
```python Python
session = composio.create(
    user_id="pg-user-550e8400-e29b-41d4",
    toolkits=["github", "gmail", "slack"]
)
```

```typescript TypeScript
const session = await composio.create("pg-user-550e8400-e29b-41d4", {
  toolkits: ["github", "gmail", "slack"],
});
```
</CodeGroup>

**Disable specific toolkits:**

<CodeGroup>
```python Python
session = composio.create(
    user_id="pg-user-550e8400-e29b-41d4",
    toolkits={"disable": ["exa", "firecrawl"]}
)
```

```typescript TypeScript
const session = await composio.create("pg-user-550e8400-e29b-41d4", {
  toolkits: { disable: ["exa", "firecrawl"] },
});
```
</CodeGroup>

### authConfigs

Override which auth configs to use for specific toolkits. Use this to:
- Use your own OAuth credentials ([white-labeling](/tool-router/white-labeling-authentication))
- Control which auth config Tool Router uses instead of auto-creating one

<CodeGroup>
```python Python
session = composio.create(
    user_id="pg-user-550e8400-e29b-41d4",
    auth_configs={
        "github": "ac_your_github_config",
        "slack": "ac_your_slack_config"
    }
)
```

```typescript TypeScript
const session = await composio.create("pg-user-550e8400-e29b-41d4", {
  authConfigs: {
    github: "ac_your_github_config",
    slack: "ac_your_slack_config",
  },
});
```
</CodeGroup>

When an auth config override is provided, Tool Router uses it to find or create a connected account for the user on that config.

### connectedAccounts

Specify which connected account to use for a toolkit. Use this when:
- A user has multiple accounts for the same toolkit (e.g., personal and work Gmail)
- You need deterministic account selection instead of "most recent"

<CodeGroup>
```python Python
session = composio.create(
    user_id="pg-user-550e8400-e29b-41d4",
    connected_accounts={
        "gmail": "ca_work_gmail",
        "github": "ca_personal_github"
    }
)
```

```typescript TypeScript
const session = await composio.create("pg-user-550e8400-e29b-41d4", {
  connectedAccounts: {
    gmail: "ca_work_gmail",
    github: "ca_personal_github",
  },
});
```
</CodeGroup>

This takes highest precedence when selecting which account to use for tool execution. See [connected account precedence](/tool-router/users-and-sessions#connected-account-precedence).

### manageConnections

Controls whether the `COMPOSIO_MANAGE_CONNECTIONS` meta-tool is included in the session. This tool allows the agent to prompt users to connect accounts during chat.

- `true` (default) - Agent can prompt users to connect accounts via auth links
- `false` - Tool not included. Use `session.authorize()` for manual auth
- `{ callbackUrl: "..." }` - Agent can prompt users, redirects to your URL after OAuth

**Disable in-chat authentication:**

<CodeGroup>
```python Python
session = composio.create(
    user_id="pg-user-550e8400-e29b-41d4",
    manage_connections=False
)
```

```typescript TypeScript
const session = await composio.create("pg-user-550e8400-e29b-41d4", {
  manageConnections: false,
});
```
</CodeGroup>

**Custom callback URL:**

<CodeGroup>
```python Python
session = composio.create(
    user_id="pg-user-550e8400-e29b-41d4",
    manage_connections={"callback_url": "https://myapp.com/callback"}
)
```

```typescript TypeScript
const session = await composio.create("pg-user-550e8400-e29b-41d4", {
  manageConnections: { callbackUrl: "https://myapp.com/callback" },
});
```
</CodeGroup>

For more details, see [Using in-chat authentication](/tool-router/using-in-chat-authentication) and [Manually authenticating users](/tool-router/manually-authenticating-users).

## Full example

<CodeGroup>
```python Python
from composio import Composio
from composio_openai_agents import OpenAIAgentsProvider

composio = Composio(
    api_key="your-api-key",
    provider=OpenAIAgentsProvider()
)

session = composio.create(
    user_id="pg-user-550e8400-e29b-41d4",
    toolkits=["github", "gmail", "slack"],
    auth_configs={
        "github": "ac_your_github_config"
    },
    connected_accounts={
        "gmail": "ca_work_gmail"
    },
    manage_connections={"callback_url": "https://myapp.com/callback"}
)
```

```typescript TypeScript
import { Composio } from "@composio/core";
import { OpenAIAgentsProvider } from "@composio/openai-agents";

const composio = new Composio({
  apiKey: "your-api-key",
  provider: new OpenAIAgentsProvider(),
});

const session = await composio.create("pg-user-550e8400-e29b-41d4", {
  toolkits: ["github", "gmail", "slack"],
  authConfigs: {
    github: "ac_your_github_config",
  },
  connectedAccounts: {
    gmail: "ca_work_gmail",
  },
  manageConnections: { callbackUrl: "https://myapp.com/callback" },
});
```
</CodeGroup>

## Session properties

### tools()

Get meta-tools to pass to your agent framework.

<CodeGroup>
```python Python
tools = session.tools()

agent = Agent(
    name="Assistant",
    instructions="You are a helpful assistant.",
    tools=tools
)
```

```typescript TypeScript
const tools = await session.tools();

const agent = new Agent({
  name: "Assistant",
  instructions: "You are a helpful assistant.",
  tools: tools,
});
```
</CodeGroup>

For framework-specific examples, see [Using as native tools](/tool-router/using-as-native-tools).

### mcp

Get the MCP server URL to use with any MCP-compatible client.

<CodeGroup>
```python Python
mcp_url = session.mcp.url
```

```typescript TypeScript
const { mcp } = session;
console.log(mcp.url);
```
</CodeGroup>

Example with OpenAI Agents SDK:

```typescript
import { Agent } from "@openai/agents";

const agent = new Agent({
  name: "Assistant",
  instructions: "You are a helpful assistant.",
  tools: [
    hostedMcpTool({
      serverLabel: "composio",
      serverUrl: mcp.url,
    }),
  ],
});
```

For more frameworks, see [Using with MCP clients](/tool-router/using-with-mcp-clients).

### authorize()

Manually authenticate a user to a toolkit outside of the chat flow. See [Manually authenticating users](/tool-router/manually-authenticating-users).

<CodeGroup>
```python Python
connection_request = session.authorize(
    "github",
    callback_url="https://myapp.com/callback"
)

print(connection_request.redirect_url)

connected_account = connection_request.wait_for_connection()
```

```typescript TypeScript
const connectionRequest = await session.authorize("github", {
  callbackUrl: "https://myapp.com/callback",
});

console.log(connectionRequest.redirectUrl);

const connectedAccount = await connectionRequest.waitForConnection();
```
</CodeGroup>

### toolkits()

List available toolkits and their connection status for the session. Use this to build a UI showing which apps are connected.

<CodeGroup>
```python Python
toolkits = session.toolkits(
    order_by="popularity",
    is_connected=True
)

for toolkit in toolkits:
    print(f"{toolkit.name}: {toolkit.connected_account.id if toolkit.connected_account else 'Not connected'}")
```

```typescript TypeScript
const toolkits = await session.toolkits({
  orderBy: "popularity",
  isConnected: true,
});

toolkits.forEach((toolkit) => {
  console.log(`${toolkit.name}: ${toolkit.connectedAccount?.id ?? "Not connected"}`);
});
```
</CodeGroup>

**Filter options:**
- `orderBy`: `"popularity"`, `"name"`, or `"connected_at"`
- `isConnected`: `true` to show only connected toolkits
- `category`: Filter by category (e.g., `"productivity"`, `"communication"`)

