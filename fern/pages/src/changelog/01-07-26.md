# Consistent Error Response Structure

Tool execution errors now return a standardized response format across all failure types. Previously, the `data` field was empty on errorsâ€”now it always includes `status_code` and `message`, matching the structure of successful responses.

## What Changed

All error responses from tool execution now include:
- `data.status_code`: HTTP status code (or `null` for non-HTTP errors)
- `data.message`: Detailed error message
- `error`: Same detailed message at the top level

## Before vs After

**Previous error response:**
```json
{
  "data": {},
  "successfull": false,
  "error": "404 Client Error: Not Found for url: ...",
}
```

**New error response:**
```json
{
  "data": {
      "http_error": "404 Client Error: Not Found for url: ...",
      "status_code": 404,
      "message": "Resource not found: The requested item does not exist"
  },
  "successfull": false,
  "error": "Resource not found: The requested item does not exist",
}
```

## Why This Matters

- **Easier parsing**: Agents and code can reliably access error details from `data.message` without special-casing empty `data` objects
- **Better debugging**: Detailed error messages replace generic HTTP error strings
- **Consistent schema**: Same response shape whether the tool succeeds or fails

---

# Union Types Added to Some Tool Schemas

We've added union types (`anyOf`) to the schemas for some tools, providing clearer type information in those APIs.

## What Changed

For select tools, fields that can take on multiple types (for example, `string`, `number`, or `null`) now use the `anyOf` keyword in their request and response schemas. Previously, these fields were modeled as a single type (e.g., just `string`) with an optional `nullable: true` flag.

## Before vs After
For example, the `GOOGLECALENDAR_GET_CURRENT_DATE_TIME` request schema changes:
**Previous (only a single type):**
```json
{
  "timezone": {
    "default": 0,
    "description": "Timezone specification...",
    "title": "Timezone",
    "type": "string"
  }
}
```

**Now (Union types preserved):**
```json
{
  "timezone": {
    "anyOf": [
      { "type": "string" },
      { "type": "number" }
    ],
    "default": 0,
    "description": "Timezone specification...",
    "title": "Timezone"
  }
}
```

Similarly, nullable fields like `page_token` in `GOOGLECALENDAR_LIST_CALENDARS`:

**Previous:**
```json
{
  "page_token": {
    "default": null,
    "description": "Token for the page of results to return...",
    "nullable": true,
    "title": "Page Token",
    "type": "string"
  }
}
```

**Now:**
```json
{
  "page_token": {
    "anyOf": [
      { "type": "string" },
      { "type": "null" }
    ],
    "default": null,
    "description": "Token for the page of results to return...",
    "title": "Page Token"
  }
}
```

## Why This Matters

- **Accurate schemas**: LLMs and code generators see the full set of allowed types
- **Better validation**: Input validation can now correctly accept all valid types, not just the first one