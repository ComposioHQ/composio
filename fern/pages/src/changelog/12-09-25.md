# Improved Tool Request & Response Schemas

We've improved the tool request and response schemas across popular toolkits, providing developers and AI agents with detailed, specific field definitions for tool inputs and outputs instead of generic object types.

## What's Changing?

Previously, tool schemas were defined as generic objects without specific field information, making it difficult to understand what data to pass or expect from tool executions. We've now added **detailed schemas** with:

- Specific field names, types, and descriptions for both inputs and outputs
- **Improved descriptions** that help AI agents understand parameter requirements
- **Field examples** showing what values to pass, enabling agents to make better decisions

## Why This Matters

This enhancement provides:
- **Better Developer Experience**: Developers using direct execute can now refer to schemas and understand exactly what fields to pass and what will be returned
- **Improved Agent Performance**: AI agents can read field descriptions and examples to understand what values to pass, leading to more accurate tool usage and fewer errors
- **Clearer Documentation**: Specific field definitions with examples make it easier to build integrations
- **Type Safety**: Strongly-typed schemas enable better tooling and IDE support

## Changes Overview

The updates include:
- **New fields added** to request and response schemas for better coverage
- **Field descriptions improved** with clearer explanations for AI agents
- **Examples added** to help agents understand expected input formats
- **Some fields modified** to reflect actual request/response structure
- **Legacy fields removed** that were no longer relevant

## Checking Schema Differences

You can compare the schema changes between versions using the following code snippets:

<Warning>
A dedicated API endpoint to retrieve schema diffs is **coming soon**. The scripts below are a temporary workaround to compare schema changes between tool versions.
</Warning>

**Python:**

```python
"""
Tool version diff - compare schema changes between versions
"""

import json
import requests
from difflib import unified_diff

# ===== SET YOUR VALUES HERE =====
TOOL_SLUG = ""  # Replace with tool slug
VERSION_OLD = "YYYYMMDD_NN"
VERSION_NEW = "YYYYMMDD_NN"
API_KEY = "your-api-key"
# ================================

def fetch_tool(version):
    url = f"https://backend.composio.dev/api/v3/tools/{TOOL_SLUG}"
    headers = {"x-api-key": API_KEY}
    response = requests.get(url, params={"version": version}, headers=headers)
    response.raise_for_status()
    return response.json()

print(f"Comparing {TOOL_SLUG}: {VERSION_OLD} → {VERSION_NEW}\n")

tool_old = fetch_tool(VERSION_OLD)
tool_new = fetch_tool(VERSION_NEW)

# Get schemas
input_old = json.dumps(tool_old.get("input_parameters", {}), indent=2, sort_keys=True)
input_new = json.dumps(tool_new.get("input_parameters", {}), indent=2, sort_keys=True)
output_old = json.dumps(tool_old.get("output_parameters", {}), indent=2, sort_keys=True)
output_new = json.dumps(tool_new.get("output_parameters", {}), indent=2, sort_keys=True)

# Print diffs
print("=" * 60)
print("INPUT PARAMETERS DIFF:")
print("=" * 60)
diff = list(unified_diff(input_old.splitlines(), input_new.splitlines(), lineterm=""))
if diff:
    print("\n".join(diff))
else:
    print("No changes")

print("\n" + "=" * 60)
print("OUTPUT PARAMETERS DIFF:")
print("=" * 60)
diff = list(unified_diff(output_old.splitlines(), output_new.splitlines(), lineterm=""))
if diff:
    print("\n".join(diff))
else:
    print("No changes")
```

**TypeScript:**

```typescript
import { diffLines } from "diff";

// ===== CONFIG =====
const TOOL_SLUG = ""; // Replace with tool slug
const VERSION_OLD = "YYYYMMDD_NN";
const VERSION_NEW = "YYYYMMDD_NN";
const API_KEY = "your-api-key";

async function fetchTool(version: string) {
  const res = await fetch(
    `$https://backend.composio.dev/api/v3/tools/${TOOL_SLUG}?version=${version}`,
    { headers: { "x-api-key": API_KEY } }
  );
  if (!res.ok) throw new Error(`HTTP ${res.status}: ${await res.text()}`);
  return res.json();
}

function printDiff(oldText: string, newText: string) {
  const diff = diffLines(oldText, newText);
  if (diff.length === 1 && !diff[0].added && !diff[0].removed) {
    console.log("No changes");
    return;
  }
  diff.forEach((part) => {
    part.value
      .split("\n")
      .filter(Boolean)
      .forEach((line) => {
        console.log(
          part.added ? `+ ${line}` : part.removed ? `- ${line}` : `  ${line}`
        );
      });
  });
}

async function main() {
  console.log(`Comparing ${TOOL_SLUG}: ${VERSION_OLD} → ${VERSION_NEW}\n`);

  const [toolOld, toolNew] = await Promise.all([
    fetchTool(VERSION_OLD),
    fetchTool(VERSION_NEW),
  ]);

  console.log("=".repeat(60) + "\nINPUT PARAMETERS DIFF:\n" + "=".repeat(60));
  printDiff(
    JSON.stringify(toolOld.input_parameters || {}, null, 2),
    JSON.stringify(toolNew.input_parameters || {}, null, 2)
  );

  console.log("\n" + "=".repeat(60) + "\nOUTPUT PARAMETERS DIFF:\n" + "=".repeat(60));
  printDiff(
    JSON.stringify(toolOld.output_parameters || {}, null, 2),
    JSON.stringify(toolNew.output_parameters || {}, null, 2)
  );
}

main().catch((e) => {
  console.error("Error:", e.message);
  process.exit(1);
});
```

## Questions?

If you have any questions about this change or need help understanding the new response schemas, please reach out to our support team or check our [Tools documentation](https://docs.composio.dev/docs/tools).

