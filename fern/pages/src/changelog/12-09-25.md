# Typed Responses Across Toolkits

We converted previously generic dict responses to typed schemas across all the following affected toolkits. Example below shows the Outlook List Messages action.

## Why This Matters
- Better developer experience for direct execute: clear fields and types
- Improved agent performance: flatter output shapes with explicit fields reduce nesting and invalid params
- Clearer docs and type safety: richer metadata for IDEs and autocomplete

**Impacted toolkits:**
- **ahrefs**
- **airtable**
- **apollo**
- **apify**
- **attio**
- **brex**
- **calendly**
- **canva**
- **clickup**
- **coda**
- **confluence**
- **discordbot**
- **elevenlabs**
- **exa**
- **facebook**
- **figma**
- **firecrawl**
- **fireflies**
- **freshdesk**
- **google_maps**
- **google_search_console**
- **googledocs**
- **googletasks**
- **heygen**
- **hubspot**
- **instagram**
- **instantly**
- **intercom**
- **klaviyo**
- **kommo**
- **linear**
- **linkedin**
- **lmnt**
- **mem0**
- **metaads**
- **microsoft_teams**
- **notion**
- **one_drive**
- **outlook**
- **pplx**
- **quickbooks**
- **ramp**
- **reddit**
- **salesforce**
- **serpapi**
- **shopify**
- **stripe**
- **tavily**
- **tiktok**
- **todoist**
- **xero**
- **youtube**
- **zendesk**
- **zoom**

## Before vs After
**Now (typed example – Outlook List Messages, 20251209_00):**
```json
{
  "data": {
    "@odata.context": "https://graph.microsoft.com/v1.0/$metadata#users('me')/messages",
    "@odata.nextLink": "https://graph.microsoft.com/v1.0/me/messages?$skip=10",
    "value": [
      {
        "id": "abc123",
        "subject": "Hi there",
        "from": { "emailAddress": { "address": "a@b.com", "name": "Alice" } },
        "hasAttachments": true
      }
    ]
  },
  "successful": true
}
```

**Previous (generic, 20251202_00):**
```json
{
  "data": {
    "response_data": { "...": "..." }
  },
  "successful": true
}
```

For the exact field mapping per toolkit, open `platform.composio.dev` → Toolkits → List Messages (or the relevant tool).

## Migration Notes
- Breaking change for consumers on the `latest` version who post-process the old nested `response_data` shape: outputs are now flattened and explicitly typed.
- New and modified fields include richer descriptions and examples; some legacy placeholders were removed.
- Re-fetch schemas for your tool/version to see the typed definitions. Use the toolkit view in `platform.composio.dev` for authoritative field details.

## Schema Diff Snippets
Quick scripts to compare input/output schema changes between tool versions. Fill in `TOOL_SLUG`, `VERSION_OLD`, `VERSION_NEW`, and `API_KEY`, then run locally to see unified diffs.

**Python:**
```python
import json, requests
from difflib import unified_diff

TOOL_SLUG = ""          # required
VERSION_OLD = "YYYYMMDD_NN"
VERSION_NEW = "YYYYMMDD_NN"
API_KEY = "your-api-key"

def fetch(version):
    r = requests.get(
        f"https://backend.composio.dev/api/v3/tools/{TOOL_SLUG}",
        params={"version": version},
        headers={"x-api-key": API_KEY},
    )
    r.raise_for_status()
    return r.json()

old, new = fetch(VERSION_OLD), fetch(VERSION_NEW)
for label, a, b in [
    ("INPUT", old.get("input_parameters", {}), new.get("input_parameters", {})),
    ("OUTPUT", old.get("output_parameters", {}), new.get("output_parameters", {})),
]:
    print(f"\n{label} DIFF\n" + "=" * 20)
    diff = unified_diff(
        json.dumps(a, indent=2, sort_keys=True).splitlines(),
        json.dumps(b, indent=2, sort_keys=True).splitlines(),
        lineterm="",
    )
    print("\n".join(diff) or "No changes")
```

**TypeScript:**
```typescript
import { diffLines } from "diff";

const TOOL_SLUG = ""; // required
const VERSION_OLD = "YYYYMMDD_NN";
const VERSION_NEW = "YYYYMMDD_NN";
const API_KEY = "your-api-key";

async function fetchTool(version: string) {
  const res = await fetch(
    `https://backend.composio.dev/api/v3/tools/${TOOL_SLUG}?version=${version}`,
    { headers: { "x-api-key": API_KEY } }
  );
  if (!res.ok) throw new Error(await res.text());
  return res.json();
}

function printDiff(label: string, oldText: string, newText: string) {
  const diff = diffLines(oldText, newText);
  console.log(`\n${label} DIFF\n${"=".repeat(20)}`);
  if (diff.length === 1 && !diff[0].added && !diff[0].removed) {
    console.log("No changes");
    return;
  }
  diff.forEach((part) =>
    part.value
      .split("\n")
      .filter(Boolean)
      .forEach((line) =>
        console.log(part.added ? `+ ${line}` : part.removed ? `- ${line}` : `  ${line}`)
      )
  );
}

async function main() {
  const [oldTool, newTool] = await Promise.all([
    fetchTool(VERSION_OLD),
    fetchTool(VERSION_NEW),
  ]);
  printDiff(
    "INPUT",
    JSON.stringify(oldTool.input_parameters || {}, null, 2),
    JSON.stringify(newTool.input_parameters || {}, null, 2)
  );
  printDiff(
    "OUTPUT",
    JSON.stringify(oldTool.output_parameters || {}, null, 2),
    JSON.stringify(newTool.output_parameters || {}, null, 2)
  );
}

main().catch((e) => {
  console.error(e.message);
  process.exit(1);
});
```
